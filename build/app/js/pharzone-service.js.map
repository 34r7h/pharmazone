{"version":3,"sources":["pharzone-service.es6"],"names":[],"mappings":"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","file":"pharzone-service.js","sourcesContent":["(() => {\n  'use strict';\n\n  class Pharzone {\n    constructor($log, $state, $firebaseObject, $firebaseArray, $rootScope, $firebaseAuth) {\n      $log.info('Starting App Services');\n/*\n      this.promise = (target, data)=> {\n        $log.debug('Promising data..', target +': '+data);\n        setTimeout(()=> {\n          if (data) {\n            $rootScope.$apply( ()=> {\n              target.data = data;\n            });\n            return target;\n          } else {\n            this.promise($rootScope, data);\n            $log.debug('looking for data..');\n          }\n        }, 500);\n      };\n*/\n      let vm = this;\n      let ref = new Firebase(\"https://pharzone.firebaseio.com\");\n      this.test = 'ALL SYSTEMS OPERATIONAL';\n      this.cart = {};\n      this.index = {products:{},users:{},orders:{}};\n      var authObj = $firebaseAuth(ref);\n      this.auth = authObj.$getAuth();\n      $rootScope.unauth = ()=>{\n        console.log('logging out');\n        let ref = new Firebase(\"https://pharzone.firebaseio.com\");\n        var authObj = $firebaseAuth(ref);\n        var userIs = authObj.$getAuth();\n        console.log(userIs);\n        authObj.$unauth();\n        $rootScope.user = authObj.$getAuth();\n        console.log(userIs);\n      };\n      if (this.auth) {\n        console.log(\"Logged in as:\", this.auth.uid);\n        $rootScope.user = this.auth.uid;\n      } else {\n        console.log(\"Logged out\");\n      }\n\n      /*\n      this.dummyData = {\n        products: [\n          {\n            name: 'Cocaine',\n            url:'cocaine',\n            price: 100,\n            unit: 'g',\n            description: 'party drug often too dilute to benefit users',\n            image: 'http://blog.heart.org/wp-content/uploads/2014/02/cocaine3.jpg'\n          },\n          {\n            name: 'DMT',\n            url:'dmt',\n            price: 130,\n            unit: 'mg',\n            description: 'spiritual drug often associated with enlightenment',\n            image: 'http://masswallpapers.mobi/wp-content/uploads/dmt-crystals-photos-7.jpg'\n          },\n          {\n            name: 'LSD',\n            url:'lsd',\n            price: 12,\n            unit: 'paper',\n            description: 'Known to unlock the unknown',\n            image: 'http://assets.hightimes.com/styles/large/s3/LSD.jpg?itok=bhGTfWkj'\n          },\n          {\n            name: 'Peyote',\n            url: 'peyote',\n            price: 40,\n            unit: 'button',\n            description: 'Aboriginal drug often used in ceremonies and rights-of-passage',\n            image: 'https://media-cdn.tripadvisor.com/media/photo-s/01/43/ba/48/peyote.jpg'\n          },\n          {\n            name: 'Psilocybe Cubensis',\n            url:'psilocybe-cubensis',\n            price: 100,\n            unit: 'g',\n            description: 'A species of psychedelic mushroom whose principal active compounds are psilocybin and psilocin',\n            image: 'http://www.culturamix.com/wp-content/gallery/8-67/psilocybe-cubensis-2.jpg'\n          }\n        ],\n        users:[\n          {\n            name:'irth orbits',\n            email:'irth03@gmail.com',\n            role:'lab',\n            deals:{\n              current:[\n                {\n                  drug: 'lsd',\n                  form:'paper',\n                  price: '100',\n                  unit: 'ml',\n                  qty: '1000'\n                },\n                {\n                  drug: 'dmt',\n                  form: 'crystals',\n                  price: '40',\n                  unit: 'mg',\n                  qty: '500'\n                }\n              ],\n              complete:[\n                {\n                  drug: 'meth',\n                  form: 'crystals',\n                  price: '4',\n                  unit: 'g',\n                  qty: '5000'\n                }\n              ]\n            }\n          },\n          {\n            name:'jah farmer',\n            email:'jaffey@gmail.com',\n            role: 'pharmacist',\n            lab:'undermarket',\n            deals:{\n              current:[\n                {\n                  drug: 'hemmehroid cream',\n                  form:'cream',\n                  price: '20',\n                  unit: '100g',\n                  qty: '100'\n                },\n                {\n                  drug: 'backsporin',\n                  form: 'salve',\n                  price: '55',\n                  unit: '50 mg',\n                  qty: '540'\n                }\n              ],\n              complete:[\n                {\n                  drug: 'sales',\n                  form: 'peer-pressure',\n                  price: '80',\n                  unit: 'interaction',\n                  qty: '40000'\n                }\n              ]\n            }\n          }\n        ],\n        orders:[\n          {\n            items:{},\n            total:100,\n            user:'me'\n          }\n        ]\n      };\n\n\n\n      (()=>{\n        let ref = new Firebase('https://pharzone.firebaseio.com/');\n        var obj = $firebaseObject(ref);\n        obj.products = this.dummyData.products;\n        obj.$save().then(function(ref) {\n          ref.key() === obj.$id; // true\n        }, function(error) {\n          console.log(\"Error:\", error);\n        });\n      })();\n*/\n\n      this.data = {\n\t      db: (()=>{\n\t\t      let ref = new Firebase('https://pharzone.firebaseio.com/');\n\t\t      var dbObj = $firebaseObject(ref).$loaded().then((data)=>{\n\t\t\t      return data;\n\t\t      });\n\t\t      return dbObj;\n\t      })(),\n        products: (()=>{\n          let ref = new Firebase('https://pharzone.firebaseio.com/products');\n          var dbObj = $firebaseObject(ref).$loaded().then((data)=>{\n            angular.forEach(data, (product, key) =>{\n              this.index['products'][product.url] = key;\n            });\n            return data;\n          });\n          return dbObj;\n        })(),\n        users:  (()=>{\n          let ref = new Firebase('https://pharzone.firebaseio.com/users');\n          var dbObj = $firebaseObject(ref).$loaded().then((data)=>{\n            return data;\n          });\n          return dbObj;\n        })(),\n        orders:  (()=>{\n          let ref = new Firebase('https://pharzone.firebaseio.com/orders');\n          var dbObj = $firebaseObject(ref).$loaded().then((data)=>{\n            return data;\n          });\n          return dbObj;\n        })()\n      };\n      /* trying to be clever with data wrangling\n\n      this.db = {};\n      angular.forEach(this.data, (method, key)=>{\n        $log.log(method, key);\n        this.db[key] = method;\n      });\n\n      */\n\n\t    this.api = {\n        updateUser: (user, name, email, pass)=>{\n          console.log('updating', user +' '+ name +' '+ email);\n          var oldEmail = '';\n          let ref = new Firebase(\"https://pharzone.firebaseio.com/users/\"+user);\n          var dbObj = $firebaseObject(ref).$loaded().then((data)=>{\n            oldEmail = data.email;\n            data.name = name;\n            data.email = email;\n            data.$save().then(()=>{\n              if(email !== oldEmail){\n                let authRef = new Firebase(\"https://pharzone.firebaseio.com/\");\n                var authObj = $firebaseAuth(authRef);\n                authObj.$changeEmail({\n                  oldEmail: oldEmail,\n                  newEmail: email,\n                  password: pass\n                }).then(function() {\n                  console.log(\"Email changed successfully!\");\n                }).catch(function(error) {\n                  console.error(\"Error: \", error);\n                });\n                let ref = new Firebase(\"https://pharzone.firebaseio.com/index/users/email\");\n                var dbObj = $firebaseObject(ref).$loaded().then((data)=>{\n                  data[email.replace('.','`')] = user;\n                  data[oldEmail.replace('.','`')] = null;\n                  data.$save();\n\n                })\n              }\n\n            })\n          });\n        },\n        login: (email, pass)=>{\n          console.log(\"Logging in as:\", email + ': '+pass);\n          let ref = new Firebase(\"https://pharzone.firebaseio.com\");\n          var authObj = $firebaseAuth(ref);\n          authObj.$authWithPassword({\n            email: email,\n            password: pass\n          }).then(function(authData) {\n            console.log(\"Logged in as:\", authData.uid);\n            $rootScope.user = authData.uid;\n          }).catch(function(error) {\n            console.error(\"Authentication failed:\", error);\n          });\n        },\n        register: (email, pass, name)=>{\n          console.log('registering user', email + ': '+ pass);\n          let ref = new Firebase(\"https://pharzone.firebaseio.com\");\n          var authObj = $firebaseAuth(ref);\n          authObj.$createUser({\n            email: email,\n            password: pass\n          }).then(function(userData) {\n            let ref = new Firebase(\"https://pharzone.firebaseio.com/users\");\n            var dbObj = $firebaseObject(ref).$loaded().then((data)=>{\n              userData.email = email;\n              userData.name = name;\n              data[userData.uid] = userData;\n              data.$save().then(()=>{\n                // Indexing users by email\n                console.log('indexing...');\n                let ref = new Firebase(\"https://pharzone.firebaseio.com/index/users/email\");\n                var dbIndex = $firebaseObject(ref).$loaded().then((data)=>{\n                  var cleanEmail = email.replace('.','`');\n                  data[cleanEmail] = userData.uid;\n                  data.$save()\n                });\n              });\n              console.log(\"User \" + userData.uid + \" created successfully!\");\n            });\n\n            return authObj.$authWithPassword({\n              email: email,\n              password: pass\n            });\n          }).then(function(authData) {\n            console.log(\"Logged in as:\", authData.uid);\n            $rootScope.user = authData.uid;\n          }).catch(function(error) {\n            console.error(\"Error: \", error);\n          });\n        },\n        unauth: ()=>{\n          console.log('logging out');\n          let ref = new Firebase(\"https://pharzone.firebaseio.com\");\n          var authObj = $firebaseAuth(ref);\n          var userIs = authObj.$getAuth();\n          console.log(userIs);\n          authObj.$unauth();\n          $rootScope.user = authObj.$getAuth();\n          console.log(userIs);\n        },\n        deleteUser: (email, pass)=>{\n          // TODO Clean up lingering db entries\n          console.log(\"Deleting User: \", email + ': '+pass);\n          let ref = new Firebase(\"https://pharzone.firebaseio.com\");\n          var authObj = $firebaseAuth(ref);\n          authObj.$removeUser({\n            email: email,\n            password: pass\n          }).then(function() {\n            let ref = new Firebase(\"https://pharzone.firebaseio.com/users\");\n              var dbObj = $firebaseObject(ref).$loaded().then((data)=>{\n                data[$rootScope.user] = null;\n                data.$save().then(()=>{\n                  // De-indexing users by email\n                  console.log('de-indexing...');\n                  let ref = new Firebase(\"https://pharzone.firebaseio.com/index/users/email\");\n                  var dbIndex = $firebaseObject(ref).$loaded().then((data)=>{\n                    var cleanEmail = email.replace('.','`');\n                    data[cleanEmail] = null;\n                    data.$save()\n                  });\n                });\n              });\n            console.log(\"User removed successfully!\");\n          }).catch(function(error) {\n            console.error(\"Error: \", error);\n          });\n        },\n        promise: (target, data)=> {\n          setTimeout(()=> {\n            if (data) {\n              $rootScope.$apply( ()=> {\n                target.data = data;\n              });\n              return target;\n            } else {\n              this.api.promise(target, data);\n            }\n          }, 500);\n        },\n        save: (productId, user, type, object)=>{\n          let ref = new Firebase('https://pharzone.firebaseio.com/users/'+user+'/'+type);\n          var obj = $firebaseObject(ref);\n          $log.debug(obj, object);\n          obj[productId] = object;\n          obj.$save().then(function(ref) {\n            ref.key() === obj.$id; // true\n          }, function(error) {\n            console.log(\"Error:\", error);\n          });\n        },\n        make: (user, type, object)=>{\n           let ref = new Firebase('https://pharzone.firebaseio.com/users/'+user+'/'+type);\n           var obj = $firebaseArray(ref);\n           obj.$loaded().then((data)=>{\n             data.$add(object)\n               .then(function(ref) {\n                 var id = ref.key();\n                 console.log(\"added record with id \" + id);\n             }, function(error) {\n               console.log(\"Error:\", error);\n             });\n           });\n\n\n\n          /*if(!this.data[type].object){\n            let length = this.data[type].length;\n            this.data[type][length]=object;\n            this.data[type].$save();\n          }*/\n        },\n        getTime: () => {\n          return Date.now();\n        },\n\t\t    addToCart: (product, cart, qty) => {\n          if(!qty) qty = 1;\n          product['qty']= qty;\n          if(cart[product.name]){\n            console.log('Already in cart.');\n          } else {\n            cart[product.name]=product;\n            return cart;\n          }\n\n\t      },\n        cartTotal: (items) => {\n          // $log.debug('calculating totals', items);\n          var total = 0;\n          angular.forEach(items, (item)=>{\n            var itemTotal = item.price * item.qty;\n            total = total + itemTotal;\n          });\n          return total;\n        },\n        checkout: (order, orderTotal, time, vm) => {\n          // var timestamp = Date.now();\n          order.total = orderTotal;\n//        this.data.orders[time]=order;\n\n        if(this.data.orders){\n          this.data.orders.$$state.value[time]=order;\n          this.data.orders.$$state.value.$save();\n        }\n        // TODO wire to db\n        var href = $state.href(\"pharzone.cart.payment\", { order: time });\n        $state.go('pharzone.cart.payment',{order:time});\n        }\n\t    }\n    }\n\n    get() {\n      return 'Pharzone';\n    }\n  }\n\n  /**\n   * @ngdoc service\n   * @name pharzone.service:Pharzone\n   *\n   * @description\n   *\n   */\n  angular\n    .module('pharzone')\n    .service('Pharzone', Pharzone);\n}());\n"],"sourceRoot":"/source/"}