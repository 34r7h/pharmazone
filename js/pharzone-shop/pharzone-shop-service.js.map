{"version":3,"sources":["pharzone-shop/pharzone-shop-service.es6"],"names":[],"mappings":";;;;;;AAAA,AAAC,CAAA,YAAM;AACL,cAAY,CAAC;;MAEP,YAAY;AACL,aADP,YAAY,CACJ,QAAQ,EAAE,IAAI,EAAE,YAAY,EAAE;;;4BADtC,YAAY;;AAEd,UAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;AAC1B,UAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;AAC3B,UAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;AACvC,UAAI,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC;;AAE9B,UAAI,KAAK,GAAG,CAAC,YAAI;AACf,YAAI,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;AAC9C,kBAAU,CAAC,YAAI;AACb,cAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAC;AACxB,gBAAI,EAAE,QAAO,CAAC;AACd,cAAE,CAAC,aAAa,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC;AAC3C,gBAAI,CAAC,KAAK,CAAC,kBAAkB,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;WAClD,MAAM;AACL,gBAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;AAC5B,iBAAK,EAAE,CAAC;WACT;SACF,EAAC,GAAG,CAAC,CAAC;OACR,CAAA,EAAG,CAAC;;;;AAIL,UAAI,UAAU,GAAG,EAAE;UAAE,KAAK,GAAG,EAAE;UAAE,QAAQ,GAAG,EAAE,CAAC;;AAE/C,UAAI,KAAK,GAAG,CAAC,YAAI;AACf,YAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;AAClC,kBAAU,CAAC,YAAI;AACb,cAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAC;AACrB,gBAAI,EAAE,QAAO,CAAC;AACd,cAAE,CAAC,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;AACrC,mBAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAC,UAAS,IAAI,EAAC;AAChD,wBAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAC,IAAI,CAAC;;;;;;aAM5B,CAAC,CAAC;AACH,kBAAK,UAAU,GAAG,UAAU,CAAC;AAC7B,kBAAK,KAAK,GAAG,KAAK,CAAC;AACnB,gBAAI,CAAC,KAAK,CAAC,MAAK,UAAU,EAAE,MAAK,KAAK,CAAC,CAAC;AACxC,gBAAI,CAAC,KAAK,CAAC,kBAAkB,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;WAClD,MAAM;AACL,gBAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;AAC5B,iBAAK,EAAE,CAAC;WACT;SACF,EAAC,GAAG,CAAC,CAAC;OACR,CAAA,EAAG,CAAC;;AAKL,UAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;AAC1B,UAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC;KACzC;;;;;;;;;;iBAvDG,YAAY;;aAyDb,eAAG;AACJ,eAAO,cAAc,CAAC;OACvB;;;WA3DG,YAAY;;;AAqElB,SAAO,CACJ,MAAM,CAAC,cAAc,CAAC,CACtB,OAAO,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC;CAC1C,CAAA,EAAE,CAAE","file":"pharzone-shop/pharzone-shop-service.js","sourcesContent":["(() => {\n  'use strict';\n\n  class PharzoneShop {\n    constructor(Pharzone, $log, PharzoneCart) {\n      this.test = Pharzone.test;\n      this.db = Pharzone.data.db;\n      this.products = Pharzone.data.products;\n      this.cart = PharzoneCart.cart;\n\n      var getDb = (()=>{\n        $log.debug('getDb() - pharzone-shop-service');\n        setTimeout(()=>{\n          if(Pharzone.data.products){\n            let vm = this;\n            vm.productsIndex = Pharzone.index.products;\n            $log.debug('vm.productsIndex', vm.productsIndex);\n          } else {\n            $log.debug('Awaiting Data');\n            getDb();\n          }\n        },500);\n      })();\n\n/*TODO keep on indexing all day */\n\n      var usersIndex = {}, deals = [], thisDeal = {};\n\n      var getDb = (()=>{\n        $log.debug('getDb() - user jazz');\n        setTimeout(()=>{\n          if(Pharzone.data.users){\n            let vm = this;\n            vm.usersIndex = Pharzone.index.users;\n            angular.forEach(Pharzone.data.users,function(user){\n              usersIndex[user.name]=user;\n\n              /*angular.forEach(user.deals.current, function(deal){\n                thisDeal[deal.drug] = deal;\n                deals.push(thisDeal);\n              });*/\n            });\n            this.usersIndex = usersIndex;\n            this.deals = deals;\n            $log.debug(this.usersIndex, this.deals);\n            $log.debug('vm.productsIndex', vm.productsIndex);\n          } else {\n            $log.debug('Awaiting Data');\n            getDb();\n          }\n        },500);\n      })();\n\n\n\n\n      this.cart = Pharzone.cart;\n      this.addToCart = Pharzone.api.addToCart;\n    }\n\n    get() {\n      return 'PharzoneShop';\n    }\n  }\n\n  /**\n   * @ngdoc service\n   * @name pharzoneShop.service:PharzoneShop\n   *\n   * @description\n   *\n   */\n  angular\n    .module('pharzoneShop')\n    .service('PharzoneShop', PharzoneShop);\n}());\n"],"sourceRoot":"/source/"}